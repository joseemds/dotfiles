(defcfg
  input  (device-file "/dev/input/by-id/usb-ROYUAN_2.4G_Wireless_Keyboard-event-kbd")
  output (uinput-sink "kmonad-outc"
    ;; To understand the importance of the following line, see the section on
    ;; Compose-key sequences at the near-bottom of this file.
    "sleep 1 && setxkbmap -option compose:ralt")
  cmp-seq ralt    ;; Set the compose key to `RightAlt'
  cmp-seq-delay 5 ;; 5ms delay between each compose-key sequence press
  fallthrough true

  allow-cmd true

  implicit-around around
)

;; See: https://github.com/kmonad/kmonad/blob/master/src/KMonad/Keyboard/Keycode.hs

(defsrc
  esc  f1   f2   f3   f4   f5   f6   f7   f8   f9   f10  f11  f12        
  grv  1    2    3    4    5    6    7    8    9    0    -    =    bspc       del
  tab  q    w    e    r    t    y    u    i    o    p    [    ]    \          pgup
  caps a    s    d    f    g    h    j    k    l    ;    '    ret					    pgdn
  lsft z    x    c    v    b    n    m    ,    .    /    rsft            up
  lctl lmet lalt           spc            ralt rmet      rctl      left down rght
)


(defalias
  sym (layer-toggle symbols)
  
  fall (cmd-button "ktype âˆ€") ;; âˆ€ - For All          (on 'a' key)
  exis (cmd-button "ktype âˆƒ") ;; âˆƒ - Exists          (on 'e' key)
  nexs (cmd-button "ktype âˆ„") ;; âˆ„ - Does Not Exist  (on 'S-e')
  impl (cmd-button "ktype â‡’") ;; â‡’ - Implies         (on '=' key)
  bimp (cmd-button "ktype â‡”") ;; â‡” - Bi-implies      (on 'S-=')
  lnot (cmd-button "ktype Â¬") ;; Â¬ - Logical Not       (on 'n' key)
  land (cmd-button "ktype âˆ§") ;; âˆ§ - Logical And       (on '7' key)
  lor  (cmd-button "ktype âˆ¨") ;; âˆ¨ - Logical Or        (on '8' key)
  nand (cmd-button "ktype âŠ¼") ;; âŠ¼ - NAND             (on 'S-7')
  nor  (cmd-button "ktype âŠ½") ;; âŠ½ - NOR              (on 'S-8')
  xor  (cmd-button "ktype âŠ•") ;; âŠ• - XOR              (on '9' key)
  
  necs (cmd-button "ktype â–¡") ;; â–¡ - Necessity        (on 'b' for 'box')
  poss (cmd-button "ktype â—‡") ;; â—‡ - Possibility      (on 'd' for 'diamond')
  know (cmd-button "ktype K") ;; K - Knowledge         (on 'k' key)
  beli (cmd-button "ktype B") ;; B - Belief           (on 'S-b')
  
  loli (cmd-button "ktype âŠ¸") ;; âŠ¸ - Linear Implies   (on 'S--')
  tens (cmd-button "ktype âŠ—") ;; âŠ— - Tensor          (on 't' key)
  parr (cmd-button "ktype â„˜") ;; â„˜ - Par              (on 'p' key)
  with (cmd-button "ktype &") ;; & - With             (on '&' key)
  plus (cmd-button "ktype âŠ•") ;; âŠ• - Plus             (on '+' key)
  bang (cmd-button "ktype !") ;; ! - Of Course        (on '!' key)
  whyn (cmd-button "ktype ?") ;; ? - Why Not          (on '?' key)
  
  ;; --- Other Implications and Relations ---
  vdsh (cmd-button "ktype âŠ¢") ;; âŠ¢ - Vdash (proves)   (on '|' key)
  vDsh (cmd-button "ktype âŠ¨") ;; âŠ¨ - VDash (models)   (on 'S-|')
  mapf (cmd-button "ktype â†¦") ;; â†¦ - Maps to          (on 'm' key)
  isom (cmd-button "ktype â‰…") ;; â‰… - Isomorphic       (on 'S-=')
  appr (cmd-button "ktype â‰ˆ") ;; â‰ˆ - Approximately    (on '~' key)
  prop (cmd-button "ktype âˆ") ;; âˆ - Proportional     (on 'S-~')
  
  ;; --- Set Theory Extended ---
  elin (cmd-button "ktype âˆˆ") ;; âˆˆ - Element Of        (on 'i' for 'in')
  nin  (cmd-button "ktype âˆ‰") ;; âˆ‰ - Not Element Of    (on 'S-i')
  subs (cmd-button "ktype âŠ†") ;; âŠ† - Subset Of         (on 's' key)
  sups (cmd-button "ktype âŠ‡") ;; âŠ‡ - Superset Of       (on 'S-s')
  psub (cmd-button "ktype âŠ‚") ;; âŠ‚ - Proper Subset    (on 'S-<')
  psup (cmd-button "ktype âŠƒ") ;; âŠƒ - Proper Superset  (on 'S->')
  unio (cmd-button "ktype âˆª") ;; âˆª - Union           (on 'u' key)
  isec (cmd-button "ktype âˆ©") ;; âˆ© - Intersection      (on 'c' for 'cap')
  sdif (cmd-button "ktype âˆ–") ;; âˆ– - Set Difference    (on 'S-/')
  symd (cmd-button "ktype â–³") ;; â–³ - Symmetric Diff    (on 'S-d')
  empt (cmd-button "ktype âˆ…") ;; âˆ… - Empty Set        (on 'o' key)
  powr (cmd-button "ktype ğ’«") ;; ğ’« - Power Set        (on 'S-p')
  
  ;; --- Math and Programming ---
  lamb (cmd-button "ktype Î»") ;; Î» - Lambda          (on 'l' key)
  func (cmd-button "ktype Æ’") ;; Æ’ - Function        (on 'f' key)
  comp (cmd-button "ktype âˆ˜") ;; âˆ˜ - Composition     (on 'S-o')
  neq  (cmd-button "ktype â‰ ") ;; â‰  - Not Equal       (on '/' key)
  leq  (cmd-button "ktype â‰¤") ;; â‰¤ - Less/Equal      (on ',' key)
  geq  (cmd-button "ktype â‰¥") ;; â‰¥ - Greater/Equal   (on '.' key)
  much (cmd-button "ktype â‰ª") ;; â‰ª - Much Less       (on 'S-,')
  mugh (cmd-button "ktype â‰«") ;; â‰« - Much Greater    (on 'S-.')
  rarr (cmd-button "ktype â†’") ;; â†’ - Right Arrow     (on '-' key)
  larr (cmd-button "ktype â†") ;; â† - Left Arrow      (on 'S--')
  uarr (cmd-button "ktype â†‘") ;; â†‘ - Up Arrow        (on 'S-^')
  darr (cmd-button "ktype â†“") ;; â†“ - Down Arrow      (on 'S-v')
  degr (cmd-button "ktype Â°") ;; Â° - Degree          (on '0' key)
  inf  (cmd-button "ktype âˆ") ;; âˆ - Infinity        (on 'S-8')
  part (cmd-button "ktype âˆ‚") ;; âˆ‚ - Partial         (on 'S-d')
  nabla (cmd-button "ktype âˆ‡") ;; âˆ‡ - Nabla           (on 'S-n')
  sqrt (cmd-button "ktype âˆš") ;; âˆš - Square Root      (on 'r' key)
  cbrt (cmd-button "ktype âˆ›") ;; âˆ› - Cube Root       (on 'S-r')
  intg (cmd-button "ktype âˆ«") ;; âˆ« - Integral        (on 'S-i')
  sum  (cmd-button "ktype Î£") ;; Î£ - Summation       (on 'S-s')
  prod (cmd-button "ktype Î ") ;; Î  - Product         (on 'S-p')
  
  ;; --- Greek Letters (Essential) ---
  alph (cmd-button "ktype Î±") ;; Î± - Alpha           (on 'g' then 'a')
  beta (cmd-button "ktype Î²") ;; Î² - Beta            (on 'g' then 'b')
  gamm (cmd-button "ktype Î³") ;; Î³ - Gamma           (on 'g' then 'g')
  Gamm (cmd-button "ktype Î“") ;; Î“ - Gamma (cap)     (on 'g' then 'G')
  delt (cmd-button "ktype Î´") ;; Î´ - Delta           (on 'g' then 'd')
  Delt (cmd-button "ktype Î”") ;; Î” - Delta (cap)     (on 'g' then 'D')
  epsi (cmd-button "ktype Îµ") ;; Îµ - Epsilon         (on 'g' then 'e')
  thet (cmd-button "ktype Î¸") ;; Î¸ - Theta           (on 'g' then 't')
  Thet (cmd-button "ktype Î˜") ;; Î˜ - Theta (cap)     (on 'g' then 'T')
  pi   (cmd-button "ktype Ï€") ;; Ï€ - Pi              (on 'g' then 'p')
  Pi   (cmd-button "ktype Î ") ;; Î  - Pi (cap)        (on 'g' then 'P')
  rho  (cmd-button "ktype Ï") ;; Ï - Rho             (on 'g' then 'r')
  sigm (cmd-button "ktype Ïƒ") ;; Ïƒ - Sigma           (on 'g' then 's')
  Sigm (cmd-button "ktype Î£") ;; Î£ - Sigma (cap)     (on 'g' then 'S')
  tau  (cmd-button "ktype Ï„") ;; Ï„ - Tau             (on 'g' then 'T')
  phi  (cmd-button "ktype Ï†") ;; Ï† - Phi             (on 'g' then 'f')
  Phi  (cmd-button "ktype Î¦") ;; Î¦ - Phi (cap)       (on 'g' then 'F')
  chi  (cmd-button "ktype Ï‡") ;; Ï‡ - Chi             (on 'g' then 'c')
  psi  (cmd-button "ktype Ïˆ") ;; Ïˆ - Psi             (on 'g' then 'y')
  Psi  (cmd-button "ktype Î¨") ;; Î¨ - Psi (cap)       (on 'g' then 'Y')
  omeg (cmd-button "ktype Ï‰") ;; Ï‰ - Omega           (on 'g' then 'o')
  Omeg (cmd-button "ktype Î©") ;; Î© - Omega (cap)     (on 'g' then 'O')
  
  ;; --- Special Symbols and Punctuation ---
  bull (cmd-button "ktype â€¢") ;; â€¢ - Bullet          (on 'S-.')
  cdot (cmd-button "ktype Â·") ;; Â· - Centered Dot    (on 'S-;')
  star (cmd-button "ktype â˜…") ;; â˜… - Star            (on '*' key)
  diam (cmd-button "ktype â™¦") ;; â™¦ - Diamond         (on 'S-4')
  chek (cmd-button "ktype âœ“") ;; âœ“ - Check Mark      (on 'v' key)
  cros (cmd-button "ktype âœ—") ;; âœ— - Cross Mark      (on 'x' key)
  warr (cmd-button "ktype âš ") ;; âš  - Warning         (on 'w' key)
  info (cmd-button "ktype â“˜") ;; â“˜ - Information     (on 'S-i')
  
  ;; --- Subscripts and Superscripts (Common) ---
  sub0 (cmd-button "ktype â‚€") ;; â‚€ - Subscript 0     
  sub1 (cmd-button "ktype â‚") ;; â‚ - Subscript 1     
  sub2 (cmd-button "ktype â‚‚") ;; â‚‚ - Subscript 2     
  subn (cmd-button "ktype â‚™") ;; â‚™ - Subscript n     
  sup0 (cmd-button "ktype â°") ;; â° - Superscript 0   
  sup1 (cmd-button "ktype Â¹") ;; Â¹ - Superscript 1   
  sup2 (cmd-button "ktype Â²") ;; Â² - Superscript 2   
  sup3 (cmd-button "ktype Â³") ;; Â³ - Superscript 3   
  supn (cmd-button "ktype â¿") ;; â¿ - Superscript n   
  
  ;; --- Currency and Special ---
  euro (cmd-button "ktype â‚¬") ;; â‚¬ - Euro            
  poun (cmd-button "ktype Â£") ;; Â£ - Pound           
  cent (cmd-button "ktype Â¢") ;; Â¢ - Cent            
  copy (cmd-button "ktype Â©") ;; Â© - Copyright       
  regi (cmd-button "ktype Â®") ;; Â® - Registered      
  trad (cmd-button "ktype â„¢") ;; â„¢ - Trademark       
  sect (cmd-button "ktype Â§") ;; Â§ - Section         
  para (cmd-button "ktype Â¶") ;; Â¶ - Paragraph       
)


(deflayer qwerty
  esc  f1   f2   f3   f4   f5   f6   f7   f8   f9   f10  f11  f12        
  grv  1    2    3    4    5    6    7    8    9    0    -    =    bspc       del
  tab  q    w    e    r    t    y    u    i    o    p    [    ]    \          pgup
  @sym a    s    d    f    g    h    j    k    l    ;    '    ret					    pgdn
  lsft z    x    c    v    b    n    m    ,    .    /    rsft            up
  lctl lmet lalt           spc            ralt rmet      rctl      left down rght
)

(deflayer symbols
  XX   XX   XX   XX   XX   XX   XX   XX   XX   XX   @degr @larr @bimp      del
  XX   XX   XX   XX   XX   XX   XX   @land (around S @lor) @inf   @rarr @impl  bspc  del 
  XX   XX   XX   @exis XX  XX   XX   @unio (around S @nin)  @Omeg    @Pi   XX   XX   XX pgup  
  XX   @fall @Sigm XX @func @Gamm XX   XX   XX   @lamb ;    '      ret      pgdn
  lsft XX   XX   @isec XX  XX   @lnot XX   @leq  @geq  @neq  rsft            up
  lctl lmet lalt           spc            ralt rmet      rctl           left down rght
)
